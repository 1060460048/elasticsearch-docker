
steps:

# Build images
  - name: gcr.io/cloud-builders/docker
    args:
      - 'build'
      - '--tag=gcr.io/$PROJECT_ID/elasticsearch52:5.2.0'
      - '5.2.0'
  - name: gcr.io/cloud-builders/docker
    args:
      - 'build'
      - '--tag=gcr.io/$PROJECT_ID/elasticsearch24:2.4.4'
      - '2.4.4'

# Run tests

# Add alias tags
  - name: gcr.io/cloud-builders/retagger
    args:
      - 'gcr.io/$PROJECT_ID/elasticsearch52:5.2.0'
      - 'gcr.io/$PROJECT_ID/elasticsearch52:latest'
  - name: gcr.io/cloud-builders/retagger
    args:
      - 'gcr.io/$PROJECT_ID/elasticsearch24:2.4.4'
      - 'gcr.io/$PROJECT_ID/elasticsearch24:latest'

images:
  - 'gcr.io/$PROJECT_ID/elasticsearch52:5.2.0'
  - 'gcr.io/$PROJECT_ID/elasticsearch52:latest'
  - 'gcr.io/$PROJECT_ID/elasticsearch24:2.4.4'
  - 'gcr.io/$PROJECT_ID/elasticsearch24:latest'
